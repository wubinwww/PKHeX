using System;
using System.Collections.Generic;

namespace PKHeX.Core;

/// <summary>
/// <see cref="SaveFile"/> lifetime stat tracking
/// </summary>
public static class Records
{
    private const byte LargeRecordCount = 100; // int32
    private const byte SmallRecordCount = 100; // int16
    private const byte Count = LargeRecordCount + SmallRecordCount;

    /// <summary>
    /// Gets the maximum value for the specified record using the provided maximum list.
    /// </summary>
    /// <param name="recordID">Record ID to retrieve the maximum for</param>
    /// <param name="maxes">Maximum enum values for each record</param>
    /// <returns>Maximum the record can be</returns>
    public static int GetMax(int recordID, ReadOnlySpan<byte> maxes)
    {
        if ((byte)recordID >= Count)
            return 0;
        return MaxByType[maxes[recordID]];
    }

    public static int GetOffset(int baseOfs, int recordID) => recordID switch
    {
        < LargeRecordCount => baseOfs + (recordID * sizeof(int)),
        < Count => baseOfs + (LargeRecordCount * sizeof(int)) + ((recordID - LargeRecordCount) * sizeof(ushort)),
        _ => -1,
    };

    private static ReadOnlySpan<int> MaxByType => new[] {999_999_999, 9_999_999, 999_999, 99_999, 65535, 9_999, 999, 7};

    public static ReadOnlySpan<byte> DailyPairs_6 => new byte[] {29, 30, 110, 111, 112, 113, 114, 115, 116, 117};
    public static ReadOnlySpan<byte> DailyPairs_7 => new byte[] {22, 23, 110, 111, 112, 113, 114, 115, 116, 117};

    /// <summary>
    /// Festa pairs; if updating the lower index record, update the Festa Mission record if currently active?
    /// </summary>
    public static ReadOnlySpan<byte> FestaPairs_7 => new byte[]
    {
        175, 6,
        176, 33,
        177, 8,
        179, 38,
        181, 74,
        182, 73,
        183, 7,
        184, 159,
        185, 9,
    };
}

public static class RecordLists
{
    public static readonly Dictionary<int, string> RecordList_6 = new()
    {
        {000, "步数"},
        {001, "保存的次数"},
        {002, "剧情情节完成时间"},
        {003, "骑自行车次数"},
        {004, "总对战次数"},
        {005, "野生宝可梦对战"},
        {006, "训练家对战"},
        {007, "宝可梦捕获"},
        {008, "钓鱼捕获"},
        {009, "孵蛋次数"},
        {010, "宝可梦进化"},
        {011, "宝可梦在宝可梦中心治愈"},
        {012, "通讯交换"},
        {013, "通讯对战"},
        {014, "通讯对战胜利"},
        {015, "通讯对战失败"},
        {016, "WiFi交换"},
        {017, "WiFi对战"},
        {018, "WiFi对战胜利"},
        {019, "WiFi对战失败"},
        {020, "红外线交换"},
        {021, "红外线对战"},
        {022, "红外线对战胜利"},
        {023, "红外线对战失败"},
        {024, "超市大量购买"},
        {025, "花费的钱"},
        {026, "看电视的次数"},
        {027, "存放在寄放屋的宝可梦"},
        {028, "宝可梦被击败次数"},
        {029, "获得的经验值（最高）"},
        {030, "获得的经验值（当天）"},
        {031, "存放在GTS中"},
        {032, "更改精灵昵称"},
        {033, "收到的奖励高级球"},
        {034, "赢得的对战点数"},
        {035, "消耗的对战点数"},

        {037, "餐厅小费: ★☆☆"},
        {038, "餐厅小费: ★★☆"},
        {039, "餐厅小费: ★★★"},
        {040, "餐厅小费: 回转梦想家"},
        {041, "咖啡馆1小费"},
        {042, "咖啡馆2小费"},
        {043, "咖啡馆3小费"},
        {044, "摄影师小费"},
        {045, "果汁馆小费"},
        {046, "诗人小费"},
        {047, "宝可美容沙龙馆修建师小费"},
        {048, "试炼屋1小费"},
        {049, "试炼屋2小费"},
        {050, "试炼屋3小费"},
        {051, "试炼屋4小费"},
        {052, "女仆小费"},
        {053, "管家小费"},
        {054, "恐怖之家小费"},
        {055, "旅行吟游诗人小费"},
        {056, "训练家宣传片工作室BGM1小费"},
        {057, "训练家宣传片工作室BGM2小费"},
        {058, "宝可美容沙龙馆小费"},
        {059, "不错！收到"},
        {060, "生日祝福"},
        {061, "在线见面的总人数"},
        {062, "擦肩的总人数"},
        {063, "目前的宝可梦里程"},
        {064, "收到的总宝可梦里程"},
        {065, "发送到PGL的总宝可梦里程"},
        {066, "超级特别训练总次数"},
        {067, "超级特别训练总通过次数"},
        {068, "个体值评估次数"},
        {069, "检查垃圾桶次数"},

        {070, "逆属性克制对战次数"},
        {071, "对战屋对战次数"},
        {072, "改变时装次数"},
        {073, "改变发型次数"},
        {074, "收获树果次数"},
        {075, "树果变异次数"},
        {076, "训练家宣传片次数"},
        {077, "朋友狩猎次数"},
        {078, "O-力量使用次数"},

        {079, "秘密基地更新"},
        {080, "获得的秘密基地旗帜"},
        {081, "华丽大赛参赛总计"},
        {082, "GTS交换"},
        {083, "奇迹交换"},
        {084, "偷偷的脚步"},
        {085, "多人华丽大赛"},
        {086, "使用宝可方块"},
        {087, "使用地图导航"},
        {088, "使用图鉴导航"},
        {089, "使用电视导航"},
        {090, "使用游戏导航"},

        {100, "冠军保卫战"},
        {101, "在家里休息"},
        {102, "使用跃起次数"},
        {103, "使用挣扎次数"},
        {104, "无效的瞬间移动次数"},
        {105, "宝可梦晕倒次数"},
        {106, "在对战中攻击盟友次数"},
        {107, "逃跑失败次数"},
        {108, "野生遭遇逃跑次数"},
        {109, "失败的钓鱼次数"},
        {110, "击败宝可梦（最高）"},
        {111, "击败宝可梦（当天）"},
        {112, "捕获宝可梦（最高）"},
        {113, "捕获宝可梦（当天）"},
        {114, "训练者对战（最高）"},
        {115, "训练者对战（当天）"},
        {116, "宝可梦进化（最高）"},
        {117, "宝可梦进化（当天）"},
        {118, "复原化石"},
        {119, "甜甜香气遭遇"},
        {120, "试炼屋测试"},
        {121, "试炼屋等级"},
        {122, "试炼屋分数"},

        {123, "餐厅的最后一次小费: ★☆☆"},
        {124, "餐厅的最后一次小费: ★★☆"},
        {125, "餐厅的最后一次小费: ★★★"},
        {126, "餐厅的最后一次小费: 回转梦想家"},
        {127, "咖啡馆1的最后一次小费"},
        {128, "咖啡馆2的最后一次小费"},
        {129, "咖啡馆2的最后一次小费"},
        {130, "摄影师的最后一次小费"},
        {131, "果汁馆的最后一次小费"},
        {132, "诗人的最后一次小费"},
        {133, "宝可美容沙龙馆修建师的最后一次小费"},
        {134, "试炼屋1的最后一次小费"},
        {135, "试炼屋2的最后一次小费"},
        {136, "试炼屋3的最后一次小费"},
        {137, "试炼屋4的最后一次小费"},
        {138, "女仆的最后一次小费"},
        {139, "管家的最后一次小费"},
        {140, "恐怖之家的最后一次小费"},
        {141, "旅行吟游诗人的最后一次小费"},
        {142, "训练家宣传片工作室BGM1的最后一次小费"},
        {143, "训练家宣传片工作室BGM2的最后一次小费"},
        {144, "宝可美容沙龙馆的最后一次小费"},

        {145, "拍摄的照片"},
        {146, "高空遭遇战(？)"},
        {147, "对战屋连胜: 单打"},
        {148, "对战屋连胜: 双打"},
        {149, "对战屋连胜: 三打"},
        {150, "对战屋连胜: 轮盘"},
        {151, "对战屋连胜: 多人"},
        {152, "ID抽奖获奖"},
        {153, "使用PP回复"},
        {154, "PSS擦肩计数(当天)"},
        {155, "朋友使用"},

        {156, "轮滑鞋次数: 向左旋转"},
        {157, "轮滑鞋次数: 向右旋转"},
        {158, "轮滑鞋次数: 奔跑启动"},
        {159, "轮滑鞋次数: 平行过弯"},
        {160, "轮滑鞋次数: 旋转爆冲"},
        {161, "轮滑鞋次数: 右360°"},
        {162, "轮滑鞋次数: 左360°"},
        {163, "轮滑鞋次数: 旋转"},
        {164, "轮滑鞋次数: 磨"},
        {165, "轮滑鞋次数: 组合"},

        {166, "钓鱼连锁"},
        {167, "在你的基地进行秘密基地对战"},
        {168, "在别人的基地进行秘密基地对战"},
        {169, "华丽大赛精彩照片"},
        {170, "使用飞翔次数"},
        {171, "翱翔高空时间"},
        {172, "使用潜水次数"},
        {173, "使用高空裂缝次数"},
        {174, "被妈妈治愈次数"},
        {175, "离洞绳使用次数"},
        {176, "探宝器使用次数"},
        {177, "训练师再战次数"},
        {178, "兴趣交流 ???"}, // similar to USUM idb

        {179, "遇到异色的宝可梦"},
        {180, "戏法屋通关"},
        {181, "无限船票 1 (擦肩)"},
        {182, "无限船票 2 (神秘礼物)"},
    };

    public static readonly Dictionary<int, string> RecordList_7 = new()
    {
        {000, "步数"},
        {001, "保存的次数"},
        {002, "剧情情节完成时间"},
        {003, "总对战次数"},
        {004, "野生宝可梦战斗"},
        {005, "训练师对战"},
        {006, "宝可梦捕获"},
        {007, "钓鱼捕获"},
        {008, "孵蛋"},
        {009, "宝可梦进化"},
        {010, "宝可梦在宝可梦中心治愈"},
        {011, "通讯交换"},
        {012, "通讯对战"},
        {013, "通讯对战胜利"},
        {014, "通讯对战失败"},
        {015, "对战地点对战"},
        {016, "对战地点对战胜利"},
        {017, "对战地点对战失败"},
        {018, "超市大量购买"},
        {019, "花费的钱"},
        {020, "存放在寄放屋的宝可梦"},
        {021, "宝可梦被击败"},
        {022, "获得的经验值（最高）"},
        {023, "获得的经验值（当天）"},
        {024, "存放在GTS中"},
        {025, "更改宝可梦昵称"},
        {026, "收到的奖励高级球"},
        {027, "赢得的对战点数"},
        {028, "消耗的对战点数"},
        {029, "技能命中要害"},
        {030, "时装计数"},
        {031, "美发沙龙消费"},
        {032, "获得树果"},
        {033, "GTS交换"},
        {034, "奇迹交换"},
        {035, "快速交换"},
        {036, "宝可清爽乐次数"},
        {037, "给予的宝可豆"},
        {038, "花费的圆庆币"},
        {039, "收集的宝可豆"},
        {040, "对战树挑战次数"},
        {041, "使用Z招式次数"},
        {042, "使用精灵球次数"},
        {043, "偷取道具次数"},
        {044, "使用招式次数"},
        {045, "等级提升次数"},
        {046, "对战逃跑次数"},
        {047, "碎岩获得道具次数"},
        {048, "使用药次数"},
        {049, "发薪日收到的钱"},
        {050, "圆庆广场总赞数"},
        {051, "旋转时间"},
        {052, "记录竖起大拇指"},
        {053, "宝可梦抚摸"},
        {054, "宝可度假地访问次数"},
        {055, "宝可度假地获得宝可豆"},
        {056, "宝可度假地已点击的宝可梦"},
        {057, "宝可度假地投入宝可豆"},
        {058, "宝可度假地提升的等级"},
        {059, "宝可度假地亲密度增加"},
        {060, "宝可度假地孵化蛋"},
        {061, "宝可度假地???"},
        {062, "对战视频QR队扫描"},
        {063, "观看的对战视频"},
        {064, "对战视频重战"},
        {065, "洛托姆图鉴互动"},
        {066, "与客人互动"},
        {067, "收集的树果堆(未满)"},
        {068, "收集的树果堆(满)"},
        {069, "卷入的道具"},
        // USUM
        {070, "洛托姆之力"},

        {072, "收集的霸主贴纸"},
        {073, "巨翅飞鱼冲浪bp赚取"},
        {074, "代理人对战获胜"},

        {100, "冠军卫冕"},
        {101, "在家里休息时间"},
        {102, "使用跃起次数"},
        {103, "使用挣扎次数"},
        {104, "使用瞬间移动没有效果"},
        {105, "自己晕倒的宝可梦"},
        {106, "在对战中攻击盟友"},
        {107, "逃跑失败"},
        {108, "野生遭遇逃跑"},
        {109, "钓鱼失败"},
        {110, "宝可梦被击败 (最高)"},
        {111, "宝可梦被击败 (当天)"},
        {112, "捕获宝可梦 (最高)"},
        {113, "捕获宝可梦 (当天)"},
        {114, "训练师对战 (最高)"},
        {115, "训练师对战 (当天)"},
        {116, "宝可梦进化 (最高)"},
        {117, "宝可梦进化 (当天)"},
        {118, "化石复活"},
        {119, "照片评级"},
        {120, "最高(超级)单打连胜"},
        {121, "最高(超级)双打连胜"},
        {122, "最高(超级)多人连胜"},
        {123, "ID抽奖获奖"},
        {124, "PP提升"},
        {125, "朋友使用"},
        {126, "钓鱼连锁"},
        {127, "遇到异色的宝可梦"},
        {128, "参与的任务"},
        {129, "托管的圆庆广场设施"},
        {130, "二维码扫描"},
        {131, "使用TM学习"},
        {132, "购买咖啡饮料"},
        {133, "训练师卡照片拍摄"},
        {134, "进化被取消"},
        {135, "呼叫 SOS 对战盟友"},
        {136, "亲密度提升"},
        {137, "皇家巨蛋对战"},
        {138, "对战后拾取的道具"},
        {139, "在马拉萨达连锁店吃饭"},
        {140, "极限特训次数"},
        {141, "激战！美食自助餐厅吃过的菜品"},
        {142, "访问宝可清爽乐"},
        {143, "宝可梦存储系统注销"},
        {144, "按摩次数"},
        {145, "躺在伊利马的床上的时间"},
        {146, "躺在古兹马的床上的时间"},
        {147, "躺在卡奇的床上的时间"},
        {148, "躺在水莲的床上的时间"},
        {149, "躺在玛奥的床上的时间"},
        {150, "躺在丽姿的床上的时间"},
        {151, "躺在哈普乌的床上的时间"},
        {152, "躺在露莎米奈的床上的时间"},
        {153, "猛冲/碎岩后获得的道具"},
        {154, "沙沙作响的树木遭遇"},
        {155, "壁架遭遇"},
        {156, "水上波纹遭遇"},
        {157, "沙云遭遇"},
        {158, "时装变化"},
        {159, "皇家巨蛋获胜"},
        {160, "怦怦度假地"},
        {161, "欢欢度假地"},
        {162, "暖暖度假地"},
        {163, "特殊二维码1"},
        {164, "特殊二维码2"},
        {165, "特殊二维码扫描"},
        {166, "岛屿扫描"},
        {167, "沙沙作响的灌木丛遭遇"},
        {168, "飞影遭遇"},
        {169, "沙沙作响的草丛遭遇"},
        {170, "尘雾遭遇"},
        {171, "胆小虫追逐"},
        {172, "果树战役胜利了"},
        {173, "冒泡点遭遇/道具"},
        {174, "躺在自己床上的时间"},
        // global missions
        {175, "捕捉很多宝可梦!"},
        {176, "在GTS交换宝可梦!"},
        {177, "孵化很多蛋!"},
        {178, "收获宝可豆!"},
        {179, "使用宝可搜寻镜获得高分!"},
        {180, "使用岛屿扫描查找宝可梦!"},
        {181, "抓住好胜蟹!"},
        {182, "捍卫你的冠军头衔!"},
        {183, "在稀有地点钓宝可梦!"},
        {184, "皇家对战!"},
        {185, "试试你的运气!"},
        {186, "在对战树获得BP!"},
        {187, "捕捉很多宝可梦!"},

        // USUM
        {188, "究极之洞旅行"},
        {189, "巨翅飞鱼冲浪"},
        {190, "阿罗拉摄影俱乐部照片已保存"},
        {191, "代理人对战参赛"},
        // 192-194 unknown
        {195, "阿罗拉摄影俱乐部贴纸的使用"},
        {196, "阿罗拉摄影俱乐部照片拍摄"},
        {197, "最高究极之洞旅行距离"},
        {198, "巨翅飞鱼冲浪获得的最高 BP"},
    };

    public static readonly Dictionary<int, string> RecordList_8 = new()
    {
        {00, "孵蛋次数"},
        {01, "捕获次数_野生"},
        {02, "捕获次数_定点"},
        {03, "捕获次数_团战"},
        {04, "捕获次数_露营"},
        {05, "捕获次数_钓鱼"},
        {06, "总计捕获次数"},
        {07, "打扮次数"},
        {08, "极限特训"},
        {09, "更改个人信息"},
        {10, "洛托姆越野赛"},
        {11, "npc交换"},
        {12, "值得赞扬"},
        {13, "连接次数"},
        {14, "登入名人堂"},
        {15, "化石复活"},
        {16, "野生宝可梦遭遇"},
        {17, "交换次数"},
        {18, "魔法交换次数"},
        {19, "一天内捕获次数"},
        {20, "一天内进化次数"},
        {21, "总计步数"},
        {22, "总计瓦特获得"},
        {23, "总计所有对战次数"},
        {24, "露营次数"},
        {25, "当前对战点数"},
        {26, "获得对战点数"},
        {27, "交换批准"},
        {28, "使用技能记录"},
        {29, "使用宝可消消乐"},
        {30, "使用薄荷次数"},
        {31, "时装"},
        {32, "进化次数"},
        {33, "网络对战次数"},
        {34, "制作咖喱饭次数"},
        {35, "挖洞兄弟挖掘次数"},
        {36, "挖掘获取稀有物品次数"},
        {37, "吹口哨次数"},
        {38, "自行车冲刺次数"},
        {39, "摇树次数"},
        {40, "摇出树果"},
        {41, "对战失败"},
        {42, "咖喱图鉴数量"},
        {43, "团战次数"},
        {44, "总计的钱"},
        {45, "创建联盟卡次数"},
        {46, "改变发型次数"},
        /* 47 */ {G8BattleTowerSingleWin, "对战塔单打连胜"},
        /* 48 */ {G8BattleTowerDoubleWin, "对战塔双打连胜"},
        {49, "现在的钱"},

        // The Records Block only stores 50 entries.
        // Record IDs for future expansion content is instead handled separately.

        // DLC
        {50, "古月鸟机器人（制球）次数"}, // saved in B9C0ECFC 
        {51, "当前对战塔层数"}, // saved in BB1DE8EF
    };

    public const int G8BattleTowerSingleWin = 47;
    public const int G8BattleTowerDoubleWin = 48;
}
